{{define "settings_panel.html"}}
<div class="settings-form">
    <div class="form-group">
        <label>Linear Velocity Ratio</label>
        <input type="range" min="0" max="2" step="0.05" value="{{if .}}{{.LinearVelRatio}}{{else}}1.0{{end}}"
               id="setting-linear-ratio" class="slider"
               oninput="document.getElementById('linear-val').textContent = this.value">
        <span id="linear-val">{{if .}}{{printf "%.2f" .LinearVelRatio}}{{else}}1.00{{end}}</span>
    </div>
    <div class="form-group">
        <label>Angular Velocity Ratio</label>
        <input type="range" min="0" max="2" step="0.05" value="{{if .}}{{.AngularVelRatio}}{{else}}1.0{{end}}"
               id="setting-angular-ratio" class="slider"
               oninput="document.getElementById('angular-val').textContent = this.value">
        <span id="angular-val">{{if .}}{{printf "%.2f" .AngularVelRatio}}{{else}}1.00{{end}}</span>
    </div>
    <div class="form-group">
        <label>Robot Radius (m)</label>
        <input type="number" min="0.05" max="2" step="0.01" value="{{if .}}{{.Radius}}{{else}}0.30{{end}}"
               id="setting-radius" class="input-sm">
    </div>
    <div class="form-actions">
        <button class="btn btn-accent" onclick="App.saveSettings()">Apply</button>
    </div>

    {{if .}}
    <div class="settings-info">
        <h4>Diagnostics</h4>
        <div class="diag-row"><span>Map:</span> <span>{{.MapHz}} Hz</span></div>
        <div class="diag-row"><span>TF:</span> <span>{{.TFHz}} Hz</span></div>
        <div class="diag-row"><span>Odom:</span> <span>{{.OdomHz}} Hz</span></div>
        <div class="diag-row"><span>Laser:</span> <span>{{.LaserHz}} Hz</span></div>
    </div>
    {{end}}

    <div class="form-actions" style="margin-top: 1rem;">
        <button class="btn btn-sm btn-danger"
                hx-get="/dialog/confirm?action=/api/robots/reboot&message=Reboot robot?"
                hx-target="#dialog-overlay" hx-swap="innerHTML"
                onclick="showDialog()">Reboot</button>
        <button class="btn btn-sm btn-danger"
                hx-get="/dialog/confirm?action=/api/robots/poweroff&message=Power off robot?"
                hx-target="#dialog-overlay" hx-swap="innerHTML"
                onclick="showDialog()">Power Off</button>
    </div>
</div>
{{end}}
