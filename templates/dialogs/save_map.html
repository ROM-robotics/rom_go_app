{{define "save_map.html"}}
<div class="dialog">
    <div class="dialog-header">
        <h3>Save Map</h3>
        <button class="btn-close" onclick="hideDialog()">âœ•</button>
    </div>
    <div class="form-group">
        <label for="map-name">Map Name</label>
        <input type="text" id="map-name" required class="input" placeholder="my_map">
    </div>
    <div class="dialog-actions">
        <button type="button" class="btn" onclick="hideDialog()">Cancel</button>
        <button type="button" class="btn btn-accent" onclick="saveMapFromDialog()">Save</button>
    </div>
</div>
<script>
function saveMapFromDialog() {
    const name = document.getElementById('map-name').value.trim();
    if (!name) { Notify.error('Map name is required'); return; }
    fetch('/api/maps/save', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: name })
    })
    .then(r => r.json())
    .then(data => {
        hideDialog();
        if (data.error) Notify.error(data.error);
        else Notify.success('Map "' + name + '" saved');
    })
    .catch(() => { hideDialog(); Notify.error('Save map failed'); });
}
</script>
{{end}}
